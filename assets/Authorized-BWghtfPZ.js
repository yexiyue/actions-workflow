import{r as a,I as g,_ as x,a3 as j,a2 as v,a1 as _,ab as k,cu as S,a7 as l,a4 as t,aa as n,ah as y,a9 as H}from"./index-5pNbV5yM.js";import{u as d}from"./index-CL1ASEu5.js";import{S as I}from"./index-CgCbgM6x.js";var V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},w=function(o,s){return a.createElement(g,x({},o,{ref:s,icon:V}))},b=a.forwardRef(w);const C=()=>{j();const r=v(),[o]=_(p=>[p.setUser]),{message:s}=k.useApp(),[i]=S(),u=i.get("code"),m=i.get("state"),[{data:e,loading:h,error:c}]=d({method:"post",url:"/api/authorized",data:{code:u,state:m}}),[z,f]=d({method:"post",url:"http://localhost:7743",data:e},{manual:!0});return a.useEffect(()=>{e&&(s.success(l._({id:"/qu0Xj"})),e.user&&o(e.user),e.token&&localStorage.setItem("token",e.token),e.access_token&&localStorage.setItem("access_token",e.access_token),e.refresh_token&&(localStorage.setItem("refresh_token",e.refresh_token),localStorage.setItem("id",e.user.id)),f())},[e]),a.useEffect(()=>{c&&s.error(l._({id:"qg1yBX"}))},[c]),t.jsx("div",{className:"w-screen h-screen overflow-hidden flex justify-center items-center bg-gradient-to-tr from-red-300 via-blue-400 to-green-300",children:t.jsx(I,{tip:t.jsx(n,{id:"xFgAOH"}),spinning:h,indicator:t.jsx(y,{style:{fontSize:24}}),children:t.jsx("div",{className:"border w-[200px] h-[200px] p-4 rounded-lg hover:shadow-lg transition flex flex-col gap-4 justify-center items-center",children:t.jsx("div",{className:"flex justify-center items-end",children:t.jsx(H,{type:"primary",icon:t.jsx(b,{}),onClick:()=>{history.length>2?r(-2):r("/",{replace:!0})},children:t.jsx(t.Fragment,{children:history.length>2?t.jsx(n,{id:"SmBcVU"}):t.jsx(n,{id:"C+C8iQ"})})})})})})})};export{C as Component};
