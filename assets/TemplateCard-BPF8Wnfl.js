import{R as y,r,C as Y,c as G,Y as Ce,g as ve,m as be,u as m,y as Ee,G as je,a as ie,aq as Pe,ar as ne,a2 as Ne,a4 as c,ac as J,a5 as ze,a6 as Oe}from"./index-DfsE3ZUc.js";import{g as Ie,b as we}from"./index-Bs1hnRnv.js";import{b as Me,R as Be,a as Le,M as w,D as Te,T as We,t as He}from"./MySkeleton-Dx4bauC4.js";import{C as Re,e as Ge,P as Ae,R as De,D as Ue}from"./index-nt0h-bPf.js";import{S as _e}from"./index-DiZEXJCJ.js";const Q=y.createContext({});Q.Consumer;var ae=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(i[n[a]]=t[n[a]]);return i};const Xe=t=>{var{prefixCls:e,className:i,avatar:n,title:a,description:s}=t,g=ae(t,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:f}=r.useContext(Y),o=f("list",e),h=G(`${o}-item-meta`,i),v=y.createElement("div",{className:`${o}-item-meta-content`},a&&y.createElement("h4",{className:`${o}-item-meta-title`},a),s&&y.createElement("div",{className:`${o}-item-meta-description`},s));return y.createElement("div",Object.assign({},g,{className:h}),n&&y.createElement("div",{className:`${o}-item-meta-avatar`},n),(a||s)&&v)},Fe=y.forwardRef((t,e)=>{const{prefixCls:i,children:n,actions:a,extra:s,className:g,colStyle:f}=t,o=ae(t,["prefixCls","children","actions","extra","className","colStyle"]),{grid:h,itemLayout:v}=r.useContext(Q),{getPrefixCls:N}=r.useContext(Y),p=()=>{let S;return r.Children.forEach(n,E=>{typeof E=="string"&&(S=!0)}),S&&r.Children.count(n)>1},j=()=>v==="vertical"?!!s:!p(),$=N("list",i),b=a&&a.length>0&&y.createElement("ul",{className:`${$}-item-action`,key:"actions"},a.map((S,E)=>y.createElement("li",{key:`${$}-item-action-${E}`},S,E!==a.length-1&&y.createElement("em",{className:`${$}-item-action-split`})))),P=h?"div":"li",z=y.createElement(P,Object.assign({},o,h?{}:{ref:e},{className:G(`${$}-item`,{[`${$}-item-no-flex`]:!j()},g)}),v==="vertical"&&s?[y.createElement("div",{className:`${$}-item-main`,key:"content"},n,b),y.createElement("div",{className:`${$}-item-extra`,key:"extra"},s)]:[n,b,Ce(s,{key:"extra"})]);return h?y.createElement(Re,{ref:e,flex:1,style:f},z):z}),re=Fe;re.Meta=Xe;const Ve=t=>{const{listBorderedCls:e,componentCls:i,paddingLG:n,margin:a,itemPaddingSM:s,itemPaddingLG:g,marginLG:f,borderRadiusLG:o}=t;return{[`${e}`]:{border:`${m(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:o,[`${i}-header,${i}-footer,${i}-item`]:{paddingInline:n},[`${i}-pagination`]:{margin:`${m(a)} ${m(f)}`}},[`${e}${i}-sm`]:{[`${i}-item,${i}-header,${i}-footer`]:{padding:s}},[`${e}${i}-lg`]:{[`${i}-item,${i}-header,${i}-footer`]:{padding:g}}}},qe=t=>{const{componentCls:e,screenSM:i,screenMD:n,marginLG:a,marginSM:s,margin:g}=t;return{[`@media screen and (max-width:${n}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:a}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:a}}}},[`@media screen and (max-width: ${i}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:s}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:t.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${m(g)}`}}}}}},Je=t=>{const{componentCls:e,antCls:i,controlHeight:n,minHeight:a,paddingSM:s,marginLG:g,padding:f,itemPadding:o,colorPrimary:h,itemPaddingSM:v,itemPaddingLG:N,paddingXS:p,margin:j,colorText:$,colorTextDescription:b,motionDurationSlow:P,lineWidth:z,headerBg:S,footerBg:E,emptyTextPadding:M,metaMarginBottom:A,avatarMarginRight:B,titleMarginBottom:D,descriptionFontSize:U}=t,L={};return["start","center","end"].forEach(T=>{L[`&-align-${T}`]={textAlign:T}}),{[`${e}`]:Object.assign(Object.assign({},Ee(t)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:S},[`${e}-footer`]:{background:E},[`${e}-header, ${e}-footer`]:{paddingBlock:s},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:g},L),{[`${i}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:a,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:o,color:$,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:B},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:$},[`${e}-item-meta-title`]:{margin:`0 0 ${m(t.marginXXS)} 0`,color:$,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":{color:$,transition:`all ${P}`,"&:hover":{color:h}}},[`${e}-item-meta-description`]:{color:b,fontSize:U,lineHeight:t.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${m(p)}`,color:b,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:z,height:t.calc(t.fontHeight).sub(t.calc(t.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:t.colorSplit}}},[`${e}-empty`]:{padding:`${m(f)} 0`,color:b,fontSize:t.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:M,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${i}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:j,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:g},[`${e}-item-meta`]:{marginBlockEnd:A,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:D,color:$,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:f,marginInlineStart:"auto","> li":{padding:`0 ${m(f)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${m(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${m(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${m(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:n},[`${e}-split${e}-something-after-last-item ${i}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${m(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:N},[`${e}-sm ${e}-item`]:{padding:v},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},Ke=t=>({contentWidth:220,itemPadding:`${m(t.paddingContentVertical)} 0`,itemPaddingSM:`${m(t.paddingContentVerticalSM)} ${m(t.paddingContentHorizontal)}`,itemPaddingLG:`${m(t.paddingContentVerticalLG)} ${m(t.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:t.padding,metaMarginBottom:t.padding,avatarMarginRight:t.padding,titleMarginBottom:t.paddingSM,descriptionFontSize:t.fontSize}),Ye=ve("List",t=>{const e=be(t,{listBorderedCls:`${t.componentCls}-bordered`,minHeight:t.controlHeightLG});return[Je(e),Ve(e),qe(e)]},Ke);var Qe=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(i[n[a]]=t[n[a]]);return i};function K(t){var e,{pagination:i=!1,prefixCls:n,bordered:a=!1,split:s=!0,className:g,rootClassName:f,style:o,children:h,itemLayout:v,loadMore:N,grid:p,dataSource:j=[],size:$,header:b,footer:P,loading:z=!1,rowKey:S,renderItem:E,locale:M}=t,A=Qe(t,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const B=i&&typeof i=="object"?i:{},[D,U]=r.useState(B.defaultCurrent||1),[L,T]=r.useState(B.defaultPageSize||10),{getPrefixCls:oe,renderEmpty:_,direction:le,list:O}=r.useContext(Y),se={current:1,total:0},Z=l=>(u,C)=>{var q;U(u),T(C),i&&i[l]&&((q=i==null?void 0:i[l])===null||q===void 0||q.call(i,u,C))},ce=Z("onChange"),me=Z("onShowSizeChange"),de=(l,u)=>{if(!E)return null;let C;return typeof S=="function"?C=S(l):S?C=l[S]:C=l.key,C||(C=`list-item-${u}`),r.createElement(r.Fragment,{key:C},E(l,u))},ge=()=>!!(N||i||P),d=oe("list",n),[pe,$e,ue]=Ye(d);let I=z;typeof I=="boolean"&&(I={spinning:I});const X=I&&I.spinning,fe=je($);let W="";switch(fe){case"large":W="lg";break;case"small":W="sm";break}const he=G(d,{[`${d}-vertical`]:v==="vertical",[`${d}-${W}`]:W,[`${d}-split`]:s,[`${d}-bordered`]:a,[`${d}-loading`]:X,[`${d}-grid`]:!!p,[`${d}-something-after-last-item`]:ge(),[`${d}-rtl`]:le==="rtl"},O==null?void 0:O.className,g,f,$e,ue),x=Ge(se,{total:j.length,current:D,pageSize:L},i||{}),k=Math.ceil(x.total/x.pageSize);x.current>k&&(x.current=k);const ee=i?r.createElement("div",{className:G(`${d}-pagination`,`${d}-pagination-align-${(e=x==null?void 0:x.align)!==null&&e!==void 0?e:"end"}`)},r.createElement(Ae,Object.assign({},x,{onChange:ce,onShowSizeChange:me}))):null;let F=ie(j);i&&j.length>(x.current-1)*x.pageSize&&(F=ie(j).splice((x.current-1)*x.pageSize,x.pageSize));const xe=Object.keys(p||{}).some(l=>["xs","sm","md","lg","xl","xxl"].includes(l)),te=Pe(xe),H=r.useMemo(()=>{for(let l=0;l<ne.length;l+=1){const u=ne[l];if(te[u])return u}},[te]),ye=r.useMemo(()=>{if(!p)return;const l=H&&p[H]?p[H]:p.column;if(l)return{width:`${100/l}%`,maxWidth:`${100/l}%`}},[JSON.stringify(p),H]);let V=X&&r.createElement("div",{style:{minHeight:53}});if(F.length>0){const l=F.map((u,C)=>de(u,C));V=p?r.createElement(De,{gutter:p.gutter},r.Children.map(l,u=>r.createElement("div",{key:u==null?void 0:u.key,style:ye},u))):r.createElement("ul",{className:`${d}-items`},l)}else!h&&!X&&(V=r.createElement("div",{className:`${d}-empty-text`},M&&M.emptyText||(_==null?void 0:_("List"))||r.createElement(Ue,{componentName:"List"})));const R=x.position||"bottom",Se=r.useMemo(()=>({grid:p,itemLayout:v}),[JSON.stringify(p),v]);return pe(r.createElement(Q.Provider,{value:Se},r.createElement("div",Object.assign({style:Object.assign(Object.assign({},O==null?void 0:O.style),o),className:he},A),(R==="top"||R==="both")&&ee,b&&r.createElement("div",{className:`${d}-header`},b),r.createElement(_e,Object.assign({},I),V,h),P&&r.createElement("div",{className:`${d}-footer`},P),N||(R==="bottom"||R==="both")&&ee)))}K.Item=re;const Ze=Ie(`
  query Template($id:Int!){
      templateWithUser(id: $id){
        userId
        name
        config
        username,
        avatarUrl,
        category{
          name
        }
        tags{
          id
          name
        }
      }
      templateDownloadCount(id: $id)
      templateFavoriteCount(id: $id)
      templateCommentCount(id: $id)
  }
`),at=({id:t})=>{var s,g,f;const{data:e,loading:i}=we(Ze,{variables:{id:t}}),n=r.useMemo(()=>{var o;if(e)return JSON.parse(JSON.parse(((o=e==null?void 0:e.templateWithUser)==null?void 0:o.config)??"{}"))},[e]),a=Ne();return c.jsxs(K.Item,{className:" cursor-pointer hover:shadow-lg transition",actions:[c.jsxs(J.Text,{type:"secondary",children:[c.jsx(Me,{})," ",e==null?void 0:e.templateDownloadCount]}),c.jsxs(J.Text,{type:"secondary",children:[c.jsx(Be,{}),e==null?void 0:e.templateFavoriteCount]}),c.jsxs(J.Text,{type:"secondary",children:[c.jsx(Le,{})," ",e==null?void 0:e.templateCommentCount]})],onClick:()=>{a(`/template/${t}`)},children:[c.jsx(K.Item.Meta,{avatar:c.jsx(w,{loading:i,className:"w-8 h-8 rounded-full",children:c.jsx(ze,{src:e==null?void 0:e.templateWithUser.avatarUrl,onClick:o=>{o==null||o.stopPropagation(),a(`/user/${e==null?void 0:e.templateWithUser.userId}`)}})}),title:c.jsx(w,{loading:i,className:"w-[100px]",children:(s=e==null?void 0:e.templateWithUser)==null?void 0:s.name}),description:c.jsxs(Oe,{children:[c.jsx(w,{loading:i,className:"w-[50px]",children:(g=e==null?void 0:e.templateWithUser.category)==null?void 0:g.name}),c.jsx(Te,{type:"vertical"}),i?Array.from(Array(3)).map((o,h)=>c.jsx(w,{loading:!0,className:"w-[50px] h-6"},h)):(f=e==null?void 0:e.templateWithUser.tags)==null?void 0:f.map(o=>c.jsx(We,{color:He[o.name],onClick:h=>{h.stopPropagation(),a(`/tag/${o.id}`)},children:o.name},o.id))]})}),c.jsx(w,{loading:i,children:n==null?void 0:n.description})]})};export{K as L,at as T};
