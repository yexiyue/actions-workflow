import{R as h,r,C as K,c as R,Y as Se,g as Ce,m as ve,u as c,y as be,G as Ee,a as te,aq as Pe,ar as ie,a2 as je,a4 as y,ac as q,a5 as ze,a6 as Oe}from"./index-5pNbV5yM.js";import{g as Ie,b as Ne}from"./index-cW0ZioI2.js";import{b as Be,R as Me,a as we,D as Le,T as Te,t as We}from"./tagMapColor-DTc7TQem.js";import{C as He,e as Re,P as Ge,R as Ae,D as De}from"./index-ks3wl7Dz.js";import{S as Ue}from"./index-CgCbgM6x.js";const Y=h.createContext({});Y.Consumer;var ne=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(i[n[a]]=t[n[a]]);return i};const Xe=t=>{var{prefixCls:e,className:i,avatar:n,title:a,description:s}=t,d=ne(t,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:o}=r.useContext(K),g=o("list",e),C=R(`${g}-item-meta`,i),v=h.createElement("div",{className:`${g}-item-meta-content`},a&&h.createElement("h4",{className:`${g}-item-meta-title`},a),s&&h.createElement("div",{className:`${g}-item-meta-description`},s));return h.createElement("div",Object.assign({},d,{className:C}),n&&h.createElement("div",{className:`${g}-item-meta-avatar`},n),(a||s)&&v)},_e=h.forwardRef((t,e)=>{const{prefixCls:i,children:n,actions:a,extra:s,className:d,colStyle:o}=t,g=ne(t,["prefixCls","children","actions","extra","className","colStyle"]),{grid:C,itemLayout:v}=r.useContext(Y),{getPrefixCls:z}=r.useContext(K),p=()=>{let x;return r.Children.forEach(n,E=>{typeof E=="string"&&(x=!0)}),x&&r.Children.count(n)>1},P=()=>v==="vertical"?!!s:!p(),$=z("list",i),b=a&&a.length>0&&h.createElement("ul",{className:`${$}-item-action`,key:"actions"},a.map((x,E)=>h.createElement("li",{key:`${$}-item-action-${E}`},x,E!==a.length-1&&h.createElement("em",{className:`${$}-item-action-split`})))),j=C?"div":"li",O=h.createElement(j,Object.assign({},g,C?{}:{ref:e},{className:R(`${$}-item`,{[`${$}-item-no-flex`]:!P()},d)}),v==="vertical"&&s?[h.createElement("div",{className:`${$}-item-main`,key:"content"},n,b),h.createElement("div",{className:`${$}-item-extra`,key:"extra"},s)]:[n,b,Se(s,{key:"extra"})]);return C?h.createElement(He,{ref:e,flex:1,style:o},O):O}),ae=_e;ae.Meta=Xe;const Fe=t=>{const{listBorderedCls:e,componentCls:i,paddingLG:n,margin:a,itemPaddingSM:s,itemPaddingLG:d,marginLG:o,borderRadiusLG:g}=t;return{[`${e}`]:{border:`${c(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:g,[`${i}-header,${i}-footer,${i}-item`]:{paddingInline:n},[`${i}-pagination`]:{margin:`${c(a)} ${c(o)}`}},[`${e}${i}-sm`]:{[`${i}-item,${i}-header,${i}-footer`]:{padding:s}},[`${e}${i}-lg`]:{[`${i}-item,${i}-header,${i}-footer`]:{padding:d}}}},Ve=t=>{const{componentCls:e,screenSM:i,screenMD:n,marginLG:a,marginSM:s,margin:d}=t;return{[`@media screen and (max-width:${n}px)`]:{[`${e}`]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:a}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:a}}}},[`@media screen and (max-width: ${i}px)`]:{[`${e}`]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:s}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:t.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${c(d)}`}}}}}},qe=t=>{const{componentCls:e,antCls:i,controlHeight:n,minHeight:a,paddingSM:s,marginLG:d,padding:o,itemPadding:g,colorPrimary:C,itemPaddingSM:v,itemPaddingLG:z,paddingXS:p,margin:P,colorText:$,colorTextDescription:b,motionDurationSlow:j,lineWidth:O,headerBg:x,footerBg:E,emptyTextPadding:B,metaMarginBottom:G,avatarMarginRight:M,titleMarginBottom:A,descriptionFontSize:D}=t,w={};return["start","center","end"].forEach(L=>{w[`&-align-${L}`]={textAlign:L}}),{[`${e}`]:Object.assign(Object.assign({},be(t)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:x},[`${e}-footer`]:{background:E},[`${e}-header, ${e}-footer`]:{paddingBlock:s},[`${e}-pagination`]:Object.assign(Object.assign({marginBlockStart:d},w),{[`${i}-pagination-options`]:{textAlign:"start"}}),[`${e}-spin`]:{minHeight:a,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:g,color:$,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:M},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:$},[`${e}-item-meta-title`]:{margin:`0 0 ${c(t.marginXXS)} 0`,color:$,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":{color:$,transition:`all ${j}`,"&:hover":{color:C}}},[`${e}-item-meta-description`]:{color:b,fontSize:D,lineHeight:t.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${c(p)}`,color:b,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:O,height:t.calc(t.fontHeight).sub(t.calc(t.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:t.colorSplit}}},[`${e}-empty`]:{padding:`${c(o)} 0`,color:b,fontSize:t.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:B,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${i}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:P,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:d},[`${e}-item-meta`]:{marginBlockEnd:G,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:A,color:$,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:o,marginInlineStart:"auto","> li":{padding:`0 ${c(o)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${c(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${c(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${c(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:n},[`${e}-split${e}-something-after-last-item ${i}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${c(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:z},[`${e}-sm ${e}-item`]:{padding:v},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},Je=t=>({contentWidth:220,itemPadding:`${c(t.paddingContentVertical)} 0`,itemPaddingSM:`${c(t.paddingContentVerticalSM)} ${c(t.paddingContentHorizontal)}`,itemPaddingLG:`${c(t.paddingContentVerticalLG)} ${c(t.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:t.padding,metaMarginBottom:t.padding,avatarMarginRight:t.padding,titleMarginBottom:t.paddingSM,descriptionFontSize:t.fontSize}),Ke=Ce("List",t=>{const e=ve(t,{listBorderedCls:`${t.componentCls}-bordered`,minHeight:t.controlHeightLG});return[qe(e),Fe(e),Ve(e)]},Je);var Ye=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(i[n[a]]=t[n[a]]);return i};function J(t){var e,{pagination:i=!1,prefixCls:n,bordered:a=!1,split:s=!0,className:d,rootClassName:o,style:g,children:C,itemLayout:v,loadMore:z,grid:p,dataSource:P=[],size:$,header:b,footer:j,loading:O=!1,rowKey:x,renderItem:E,locale:B}=t,G=Ye(t,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const M=i&&typeof i=="object"?i:{},[A,D]=r.useState(M.defaultCurrent||1),[w,L]=r.useState(M.defaultPageSize||10),{getPrefixCls:re,renderEmpty:U,direction:oe,list:I}=r.useContext(K),le={current:1,total:0},Q=l=>(u,S)=>{var V;D(u),L(S),i&&i[l]&&((V=i==null?void 0:i[l])===null||V===void 0||V.call(i,u,S))},se=Q("onChange"),ce=Q("onShowSizeChange"),me=(l,u)=>{if(!E)return null;let S;return typeof x=="function"?S=x(l):x?S=l[x]:S=l.key,S||(S=`list-item-${u}`),r.createElement(r.Fragment,{key:S},E(l,u))},de=()=>!!(z||i||j),m=re("list",n),[ge,pe,$e]=Ke(m);let N=O;typeof N=="boolean"&&(N={spinning:N});const X=N&&N.spinning,ue=Ee($);let T="";switch(ue){case"large":T="lg";break;case"small":T="sm";break}const fe=R(m,{[`${m}-vertical`]:v==="vertical",[`${m}-${T}`]:T,[`${m}-split`]:s,[`${m}-bordered`]:a,[`${m}-loading`]:X,[`${m}-grid`]:!!p,[`${m}-something-after-last-item`]:de(),[`${m}-rtl`]:oe==="rtl"},I==null?void 0:I.className,d,o,pe,$e),f=Re(le,{total:P.length,current:A,pageSize:w},i||{}),Z=Math.ceil(f.total/f.pageSize);f.current>Z&&(f.current=Z);const k=i?r.createElement("div",{className:R(`${m}-pagination`,`${m}-pagination-align-${(e=f==null?void 0:f.align)!==null&&e!==void 0?e:"end"}`)},r.createElement(Ge,Object.assign({},f,{onChange:se,onShowSizeChange:ce}))):null;let _=te(P);i&&P.length>(f.current-1)*f.pageSize&&(_=te(P).splice((f.current-1)*f.pageSize,f.pageSize));const he=Object.keys(p||{}).some(l=>["xs","sm","md","lg","xl","xxl"].includes(l)),ee=Pe(he),W=r.useMemo(()=>{for(let l=0;l<ie.length;l+=1){const u=ie[l];if(ee[u])return u}},[ee]),ye=r.useMemo(()=>{if(!p)return;const l=W&&p[W]?p[W]:p.column;if(l)return{width:`${100/l}%`,maxWidth:`${100/l}%`}},[JSON.stringify(p),W]);let F=X&&r.createElement("div",{style:{minHeight:53}});if(_.length>0){const l=_.map((u,S)=>me(u,S));F=p?r.createElement(Ae,{gutter:p.gutter},r.Children.map(l,u=>r.createElement("div",{key:u==null?void 0:u.key,style:ye},u))):r.createElement("ul",{className:`${m}-items`},l)}else!C&&!X&&(F=r.createElement("div",{className:`${m}-empty-text`},B&&B.emptyText||(U==null?void 0:U("List"))||r.createElement(De,{componentName:"List"})));const H=f.position||"bottom",xe=r.useMemo(()=>({grid:p,itemLayout:v}),[JSON.stringify(p),v]);return ge(r.createElement(Y.Provider,{value:xe},r.createElement("div",Object.assign({style:Object.assign(Object.assign({},I==null?void 0:I.style),g),className:fe},G),(H==="top"||H==="both")&&k,b&&r.createElement("div",{className:`${m}-header`},b),r.createElement(Ue,Object.assign({},N),F,C),j&&r.createElement("div",{className:`${m}-footer`},j),z||(H==="bottom"||H==="both")&&k)))}J.Item=ae;const Qe=Ie(`
  query Template($id:Int!){
      templateWithUser(id: $id){
        userId
        name
        config
        username,
        avatarUrl,
        category{
          name
        }
        tags{
          id
          name
        }
      }
      templateDownloadCount(id: $id)
      templateFavoriteCount(id: $id)
      templateCommentCount(id: $id)
  }
`),nt=({id:t})=>{var a,s,d;const{data:e}=Ne(Qe,{variables:{id:t}}),i=r.useMemo(()=>{var o;if(e)return JSON.parse(JSON.parse(((o=e==null?void 0:e.templateWithUser)==null?void 0:o.config)??"{}"))},[e]),n=je();return y.jsxs(J.Item,{className:" cursor-pointer hover:shadow-lg transition",actions:[y.jsxs(q.Text,{type:"secondary",children:[y.jsx(Be,{})," ",e==null?void 0:e.templateDownloadCount]}),y.jsxs(q.Text,{type:"secondary",children:[y.jsx(Me,{}),e==null?void 0:e.templateFavoriteCount]}),y.jsxs(q.Text,{type:"secondary",children:[y.jsx(we,{})," ",e==null?void 0:e.templateCommentCount]})],onClick:()=>{n(`/template/${t}`)},children:[y.jsx(J.Item.Meta,{avatar:y.jsx(ze,{src:e==null?void 0:e.templateWithUser.avatarUrl,onClick:o=>{o==null||o.stopPropagation(),n(`/user/${e==null?void 0:e.templateWithUser.userId}`)}}),title:(a=e==null?void 0:e.templateWithUser)==null?void 0:a.name,description:y.jsxs(Oe,{children:[(s=e==null?void 0:e.templateWithUser.category)==null?void 0:s.name,y.jsx(Le,{type:"vertical"}),(d=e==null?void 0:e.templateWithUser.tags)==null?void 0:d.map(o=>y.jsx(Te,{color:We[o.name],onClick:g=>{g.stopPropagation(),n(`/tag/${o.id}`)},children:o.name},o.id))]})}),i==null?void 0:i.description]})};export{J as L,nt as T};
